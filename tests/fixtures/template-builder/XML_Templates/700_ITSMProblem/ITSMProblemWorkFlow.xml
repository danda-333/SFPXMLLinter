<?xml version="1.0" encoding="utf-8"?>
<WorkFlow xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" Ident="ITSMProblemWorkFlow" xmlns:dsp="http://www.gappex.com/sfp/DataSource/Parameters" FormIdent="ITSMProblem" PackageIdent="ITSMPackage">
  <Definition>
    <States>
      <State Value="0" TitleResourceKey="Deleted_ITSM" ColorCssClass="danger"/> <!--Deleted-->
      <State Value="1" TitleResourceKey="New_ITSM" ColorCssClass="warning"/> <!--New-->
      <State Value="2" TitleResourceKey="Registration_ITSM" ColorCssClass="warning"/> <!--Registration-->  
      <State Value="3" TitleResourceKey="AssignedToGroup_ITSM" ColorCssClass="warning"/> <!--AssignedToGroup-->  
      <State Value="4" TitleResourceKey="InProcess_ITSM" ColorCssClass="warning"/> <!--InProcess-->  
      <State Value="5" TitleResourceKey="Solved_ITSM" ColorCssClass="success"/> <!--Solved-->  
      <State Value="6" TitleResourceKey="Closed_ITSM" ColorCssClass="sfp bg-grey"/> <!--Closed-->  
    </States>
  </Definition>

  <GlobalJavaScripts>
    <JavaScript xsi:type="ShowHide" Ident="ShowHideCategoryLevel5" ControlIdent="IsShowCategoryLevel5" >
      <Selectors>
        <string>.js-howHideCategoryLevel5</string>
      </Selectors>
      <ShowValues>
        <string>1</string>
      </ShowValues>
    </JavaScript>
    <JavaScript xsi:type="ShowHide" Ident="ShowHideProblemSolutionJustification" ControlIdent="IsProblemSolved" >
      <Selectors>
        <string>.js-showHideProblemSolutionJustification</string>
      </Selectors>
      <ShowValues>
        <string>0</string>
      </ShowValues>
    </JavaScript>
  </GlobalJavaScripts>

  <ControlShareCodes>

		<ControlShareCode Ident="ShowCommunicationControlShare">
			<Controls>

				<FormControl Ident="CommunicationList" IsVisible="true" />
				<FormControl Ident="PHCommunicationCard" IsVisible="true" />

			</Controls>
		</ControlShareCode> <!-- <FormControl xsi:type="ShareCodeControl" Ident="ShowCommunicationControlShare" /> -->

		<ControlShareCode Ident="EnableCommunicationControlShare">
			<Controls>

				<FormControl Ident="Communication" IsVisible="true" IsReadOnly="false"/>
				<FormControl Ident="CommunicationList" IsVisible="true" />
				<FormControl Ident="PHCommunicationCard" IsVisible="true" />

			</Controls>
		</ControlShareCode> <!-- <FormControl xsi:type="ShareCodeControl" Ident="EnableCommunicationControlShare" /> -->

		<ControlShareCode Ident="EnableAssigneeControlShare">
			<Controls>
				<FormControl Ident="AssignedGroupID" IsVisible="true" IsReadOnly="false"/>
				<FormControl Ident="AssignedAccountID" IsVisible="true" IsReadOnly="false"/>
				<FormControl Ident="PHRequestControlCard" IsVisible="true" />
			</Controls>
		</ControlShareCode> <!-- <FormControl xsi:type="ShareCodeControl" Ident="EnableAssigneeControlShare" /> -->

		<ControlShareCode Ident="ShowAssigneeControlShare">
			<Controls>
				<FormControl Ident="AssignedGroupID" IsVisible="true" />
				<FormControl Ident="AssignedAccountID" IsVisible="true" />
				<FormControl Ident="PHRequestControlCard" IsVisible="true" />
			</Controls>
		</ControlShareCode> <!-- <FormControl xsi:type="ShareCodeControl" Ident="ShowAssigneeControlShare" /> -->

		<ControlShareCode Ident="EnableContactInformationControlShare">
			<Controls>
				<FormControl Ident="ReporterAccountID" IsVisible="true" IsReadOnly="false" />
				<FormControl Ident="ReporterEmail" IsVisible="true" IsReadOnly="false" />
				<FormControl Ident="ReporterPhone" IsVisible="true" IsReadOnly="false" />
				<FormControl Ident="PHContactInformationCard" IsVisible="true" />
			</Controls>
		</ControlShareCode> <!-- <FormControl xsi:type="ShareCodeControl" Ident="EnableContactInformationControlShare" /> -->

		<ControlShareCode Ident="ShowContactInformationControlShare">
			<Controls>
				<FormControl Ident="ReporterAccountID" IsVisible="true" />
				<FormControl Ident="ReporterEmail" IsVisible="true" />
				<FormControl Ident="ReporterPhone" IsVisible="true" />
				<FormControl Ident="PHContactInformationCard" IsVisible="true" />
			</Controls>
		</ControlShareCode> <!-- <FormControl xsi:type="ShareCodeControl" Ident="ShowContactInformationControlShare" /> -->

		<ControlShareCode Ident="EnableCategoryControlShare">
			<Controls>
				<FormControl Ident="ITSMCompanyIdent" IsReadOnly="false" />
				<FormControl Ident="ITSMCategoryLevel2Ident" IsReadOnly="false" />
				<FormControl Ident="ITSMCategoryLevel3Ident" IsReadOnly="false" />
				<FormControl Ident="ITSMCategoryLevel4Ident" IsReadOnly="false" />
				<FormControl Ident="ITSMCategoryLevel5Ident" IsReadOnly="false" />
			</Controls>
		</ControlShareCode> <!-- <FormControl xsi:type="ShareCodeControl" Ident="EnableCategoryControlShare" /> -->

		<ControlShareCode Ident="EnableBasicControlShare">
			<Controls>
				<FormControl Ident="Subject" IsReadOnly="false" />
				<FormControl Ident="Description" IsReadOnly="false" />
				<FormControl Ident="ITSMIncidentClassificationTypeGuid" IsReadOnly="false" />
				<FormControl Ident="ITSMOperationalEnvironmentTypeGuid" IsReadOnly="false" />
        
        <FormControl Ident="DialogAssignedGroupID" IsReadOnly="false" />
        <FormControl Ident="DialogCommunication" IsReadOnly="false" />
        <FormControl Ident="DialogAssignedAccountID" IsReadOnly="false" />
        <FormControl Ident="ParentITSMID" IsReadOnly="false" />
        <FormControl Ident="DialogAssignedMyselfGroupID" IsReadOnly="false" />
			</Controls>
		</ControlShareCode> <!-- <FormControl xsi:type="ShareCodeControl" Ident="EnableBasicControlShare" /> -->

		<ControlShareCode Ident="ShowLinkControlShare">
			<Controls>
				<FormControl Ident="ParentITSMRequestID" IsVisible="true" />
				<FormControl Ident="SubTicketDataGrid" IsVisible="true" />
				<FormControl Ident="ITSMLinkSubform" IsVisible="true" />
			</Controls>
		</ControlShareCode> <!-- <FormControl xsi:type="ShareCodeControl" Ident="ShowLinkControlShare" /> -->

		<ControlShareCode Ident="EnableLinkControlShare">
			<Controls>
				<FormControl Ident="ParentITSMRequestID" IsVisible="true" IsReadOnly="false" />
				<FormControl Ident="SubTicketDataGrid" IsVisible="true" />
				<FormControl Ident="ITSMLinkSubform" IsVisible="true" IsReadOnly="false" />
			</Controls>
		</ControlShareCode> <!-- <FormControl xsi:type="ShareCodeControl" Ident="EnableLinkControlShare" /> -->

		<ControlShareCode Ident="EnableDocumentationControlShare">
			<Controls>
				<FormControl Ident="PHDocumentationCard" IsVisible="true"/>
				<FormControl Ident="ITSMGeneralResolutionMethodTypeGuid" IsVisible="true" IsReadOnly="false" />
				<FormControl Ident="ProblemCause" IsVisible="true" IsReadOnly="false" />
				<FormControl Ident="SolutionDescription" IsVisible="true" IsReadOnly="false" />
				<FormControl Ident="SolutionAditionalInformation" IsVisible="true" IsReadOnly="false" />
			</Controls>
		</ControlShareCode> <!-- <FormControl xsi:type="ShareCodeControl" Ident="EnableDocumentationControlShare" /> -->

		<ControlShareCode Ident="ShowDocumentationControlShare">
			<Controls>
				<FormControl Ident="PHDocumentationCard" IsVisible="true"/>
			</Controls>
		</ControlShareCode> <!-- <FormControl xsi:type="ShareCodeControl" Ident="ShowDocumentationControlShare" /> -->

		<ControlShareCode Ident="EnableWrittenEvaluationControlShare">
			<Controls>
				<FormControl Ident="PHSolutionCard" IsVisible="true"/>
				<FormControl Ident="IsProblemSolved" IsVisible="true" IsReadOnly="false" />
				<FormControl Ident="ProblemSolutionJustification" IsVisible="true" IsReadOnly="false" />
			</Controls>
		</ControlShareCode> <!-- <FormControl xsi:type="ShareCodeControl" Ident="EnableWrittenEvaluationControlShare" /> -->

		<ControlShareCode Ident="ShowWrittenEvaluationControlShare">
			<Controls>
				<FormControl Ident="PHSolutionCard" IsVisible="true"/>
			</Controls>
		</ControlShareCode> <!-- <FormControl xsi:type="ShareCodeControl" Ident="ShowWrittenEvaluationControlShare" /> -->
  </ControlShareCodes> 

  <ActionShareCodes>
    <!-- <ActionShareCode Ident="BasicRequiredActionShare">
      <Actions>
        <Action xsi:type="Required" ActionStart="BeforeValidation">
          <Idents>
            <string></string>
          </Idents>
        </Action>

        <Action xsi:type="IF" ActionStart="BeforeValidation">
          <Condition>
            <SQL>
              SELECT IIF(
                @PaymentTermsIdent = 'Other'
              , 1, 0)
            </SQL>
            <Parameters>
              <dsp:Parameter xsi:type="dsp:VariableParameter" Ident="PaymentTermsIdent" DataType="String"  />
            </Parameters>
          </Condition>
          <TrueActions><Action xsi:type="Required" ActionStart="BeforeValidation">
            <Idents>
              <string>PaymentTermsOther</string>
            </Idents>
          </Action>
          </TrueActions>
        </Action>
      </Actions>

      
    </ActionShareCode> --> <!-- <Action xsi:type="ShareCode" Ident="BasicRequiredActionShare" /> -->

    <!-- Email Actions -->
    <!-- <ActionShareCode Ident="*EmailActionShare">
      <Actions>

        <Action xsi:type="Email" SubjectResourceKey="*_Email_ITSM" BodyResourceKey="*_Email_ITSM" EmailIdent="*_Email_ITSM" ActionStart="AfterPermission" Ident="*_Email_ITSM">
          <Recipients>
            <Recipient RecipientType="To" SourceType="Permission" Value="*"/>
          </Recipients>
        </Action>

      </Actions>
    </ActionShareCode> --> <!-- <Action xsi:type="ShareCode" Ident="SubmitEmailActionShare" /> -->

  </ActionShareCodes> 

  <ButtonShareCodes>

    <ButtonShareCode Ident="TempAssignButtonShare">
      <Buttons>
        <Button Ident="TempAssignGroupButton" IsVisible="true"/>
        <Button Ident="TempAssignButton" IsVisible="true">
          <Actions>
            <Action xsi:type="ChangeState" State="4" ActionStart="AfterSave" />
          </Actions>
        </Button>
      </Buttons>
    </ButtonShareCode> <!-- <Button xsi:type="ShareCodeButton" Ident="TempAssignButtonShare" />  -->

    <ButtonShareCode Ident="TakeoutForSolveButtonShare">
      <Buttons>
        <Button Ident="TempAssignGroupButton" IsVisible="true"/>
        <Button Ident="TakeoutForSolveButton" IsVisible="true">
          <Actions>
            <Action xsi:type="ChangeState" State="4" ActionStart="AfterSave" />
          </Actions>
        </Button>
      </Buttons>
    </ButtonShareCode> <!-- <Button xsi:type="ShareCodeButton" Ident="TakeoutForSolveButtonShare" />  -->

    <ButtonShareCode Ident="SolveButtonShare">
      <Buttons>
        <Button Ident="SolveButton" IsVisible="true">
          <Actions>
            <Action xsi:type="ChangeState" State="5" ActionStart="AfterSave" />
          </Actions>
        </Button>
      </Buttons>
    </ButtonShareCode> <!-- <Button xsi:type="ShareCodeButton" Ident="SolveButtonShare" />  -->

    <ButtonShareCode Ident="ToProcessButtonShare">
      <Buttons>
        <Button Ident="ToProcessButton" IsVisible="true">
          <Actions>
            <Action xsi:type="ChangeState" State="3" ActionStart="AfterSave" />
          </Actions>
        </Button>
      </Buttons>
    </ButtonShareCode> <!-- <Button xsi:type="ShareCodeButton" Ident="ToProcessButtonShare" />  -->

    <ButtonShareCode Ident="CloseButtonShare">
      <Buttons>
        <Button Ident="CloseButton" IsVisible="true">
          <Actions>
            <Action xsi:type="ChangeState" State="6" ActionStart="AfterSave" />
          </Actions>
        </Button>
      </Buttons>
    </ButtonShareCode> <!-- <Button xsi:type="ShareCodeButton" Ident="CloseButtonShare" />  -->

    <ButtonShareCode Ident="SubmitButtonShare">
      <Buttons>
        <Button Ident="SubmitButton" IsVisible="true">
          <Actions>
            <Action xsi:type="ChangeState" State="2" ActionStart="AfterSave" />
            <Action xsi:type="ActionTrigger" Ident="UpdateITSMKey" ActionStart="AfterSave">
              <DataSource>
                <SQL>
                  DECLARE 
                    @CounterIdent VARCHAR(100) = 'P-',
                    @NextNumber INT

                  EXEC @NextNumber = usr.CounterGetNext @CounterIdent, @UserID;

                  UPDATE usr.ITSMProblem
                  SET ITSMKey = CONCAT(@CounterIdent, RIGHT('000000' + CAST(@NextNumber AS VARCHAR(6)), 6))
                  WHERE ID = @ID
                </SQL>
                <Parameters>
                  <dsp:Parameter xsi:type="dsp:VariableParameter" Ident="ID" DataType="Number" />
                  <dsp:Parameter xsi:type="dsp:VariableParameter" Ident="UserID" DataType="Number" ConstantType="UserID" />                  
                </Parameters>
              </DataSource>
            </Action>
          </Actions>
        </Button>
      </Buttons>
    </ButtonShareCode> <!-- <Button xsi:type="ShareCodeButton" Ident="SubmitButtonShare" />  -->


    <ButtonShareCode Ident="SaveAndExitButtonShare">
      <Buttons>
        <Button Ident="SaveAndExitGroupButton" IsVisible="true"/>
        <Button Ident="SaveButton" IsVisible="true"/>
        <Button Ident="SaveAndExitButton" IsVisible="true"/>
      </Buttons>
    </ButtonShareCode> <!-- <Button xsi:type="ShareCodeButton" Ident="SaveAndExitButtonShare" />  -->

    <ButtonShareCode Ident="DeleteButtonShare">
      <Buttons>
        <Button Ident="DeleteButton" IsVisible="true">
          <Actions>
            <Action xsi:type="ChangeState" State="0" ActionStart="AfterSave" />
          </Actions>
        </Button>
      </Buttons>
    </ButtonShareCode> <!-- <Button xsi:type="ShareCodeButton" Ident="DeleteButtonShare" />  -->

    <ButtonShareCode Ident="AssignButtonShare">
			<Buttons>
				<Button Ident="AssignGroupButton" IsVisible="true"/>
				<Button Ident="AssignToTeamButton" IsVisible="true"/>
				<Button Ident="AssignButton" IsVisible="true"/>
				<Button Ident="AssignMyselfButton" IsVisible="true">
          <VisibleCondition>
						<SQL>
							DECLARE @PermissionIDs dbo.ListNVarchar100Type;
							INSERT INTO @PermissionIDs VALUES ('ITSMSpecialist'), ('ITSMOperator');

							SELECT IIF(
								(
									SELECT COUNT(*) 
									FROM dbo.GroupAccount 
									WHERE
										AccountID = @UserID 
										AND GroupID IN (
											SELECT GroupID
											FROM usr.ITSM_GetAllowedGroupByFolderTreeAndPermission(
												COALESCE(@ITSMCategoryLevel5Ident, @ITSMCategoryLevel4Ident, @ITSMCategoryLevel3Ident, @ITSMCategoryLevel2Ident, @ITSMCompanyIdent)
												, @PermissionIDs
											)
										)
								) > 1, 
								1, 
								0
							)
						</SQL>
						<Parameters>
							<dsp:Parameter xsi:type="dsp:VariableParameter" Ident="UserID" DataType="Number" ConstantType="UserID" />		
							<dsp:Parameter xsi:type="dsp:VariableParameter" Ident="ITSMCompanyIdent" DataType="VarChar" MaxLength="900" />
							<dsp:Parameter xsi:type="dsp:VariableParameter" Ident="ITSMCategoryLevel2Ident" DataType="VarChar" MaxLength="900"/>
							<dsp:Parameter xsi:type="dsp:VariableParameter" Ident="ITSMCategoryLevel3Ident" DataType="VarChar" MaxLength="900"/>
							<dsp:Parameter xsi:type="dsp:VariableParameter" Ident="ITSMCategoryLevel4Ident" DataType="VarChar" MaxLength="900"/>
							<dsp:Parameter xsi:type="dsp:VariableParameter" Ident="ITSMCategoryLevel5Ident" DataType="VarChar" MaxLength="900"/>								
						</Parameters>
					</VisibleCondition>
          <Actions>
            <Action xsi:type="ChangeState" State="4" ActionStart="AfterSave" />
            <Action xsi:type="ActionTrigger" Ident="UpdateAssignedAccountID" ActionStart="AfterSave">
              <DataSource>
                <SQL>
                  UPDATE usr.ITSMProblem
                  SET AssignedAccountID = @UserID
                  WHERE ID = @ID
                </SQL>
                <Parameters>
                  <dsp:Parameter xsi:type="dsp:VariableParameter" Ident="ID" DataType="Number" />
                  <dsp:Parameter xsi:type="dsp:VariableParameter" Ident="UserID" DataType="Number" ConstantType="UserID" />                  
                </Parameters>
              </DataSource>
            </Action>
          </Actions>
        </Button>
				<Button Ident="AssignMyselfOneGroupButton" IsVisible="true">
          <VisibleCondition>
						<SQL>
							DECLARE @PermissionIDs dbo.ListNVarchar100Type;
							INSERT INTO @PermissionIDs VALUES ('ITSMSpecialist'), ('ITSMOperator');

							SELECT IIF(
								(
									SELECT COUNT(*) 
									FROM dbo.GroupAccount 
									WHERE
										AccountID = @UserID 
										AND GroupID IN (
											SELECT GroupID
											FROM usr.ITSM_GetAllowedGroupByFolderTreeAndPermission(
												COALESCE(@ITSMCategoryLevel5Ident, @ITSMCategoryLevel4Ident, @ITSMCategoryLevel3Ident, @ITSMCategoryLevel2Ident, @ITSMCompanyIdent)
												, @PermissionIDs
											)
										)
								) = 1, 
								1, 
								0
							)
						</SQL>
						<Parameters>
							<dsp:Parameter xsi:type="dsp:VariableParameter" Ident="UserID" DataType="Number" ConstantType="UserID" />		
							<dsp:Parameter xsi:type="dsp:VariableParameter" Ident="ITSMCompanyIdent" DataType="VarChar" MaxLength="900" />
							<dsp:Parameter xsi:type="dsp:VariableParameter" Ident="ITSMCategoryLevel2Ident" DataType="VarChar" MaxLength="900"/>
							<dsp:Parameter xsi:type="dsp:VariableParameter" Ident="ITSMCategoryLevel3Ident" DataType="VarChar" MaxLength="900"/>
							<dsp:Parameter xsi:type="dsp:VariableParameter" Ident="ITSMCategoryLevel4Ident" DataType="VarChar" MaxLength="900"/>
							<dsp:Parameter xsi:type="dsp:VariableParameter" Ident="ITSMCategoryLevel5Ident" DataType="VarChar" MaxLength="900"/>					
						</Parameters>
					</VisibleCondition>
          <Actions>
            <Action xsi:type="ChangeState" State="4" ActionStart="AfterSave" />
            <Action xsi:type="ActionTrigger" Ident="UpdateAssignedAccountID" ActionStart="AfterSave">
              <DataSource>
                <SQL>
                  UPDATE usr.ITSMProblem
                  SET AssignedAccountID = @UserID
                  WHERE ID = @ID
                </SQL>
                <Parameters>
                  <dsp:Parameter xsi:type="dsp:VariableParameter" Ident="ID" DataType="Number" />
                  <dsp:Parameter xsi:type="dsp:VariableParameter" Ident="UserID" DataType="Number" ConstantType="UserID" />                  
                </Parameters>
              </DataSource>
            </Action>
          </Actions>
        </Button>
			</Buttons>
		</ButtonShareCode><!-- <Button xsi:type="ShareCodeButton" Ident="AssignButtonShare" />  -->

  </ButtonShareCodes> 

  <GlobalActions>

    <!-- <Action xsi:type="ActionTrigger" Ident="*" ActionStart="AfterSave">
      <DataSource>
        <SQL>

        </SQL>
        <Parameters>
          <dsp:Parameter xsi:type="dsp:VariableParameter" Ident="ID" DataType="Number"  />
        </Parameters>
      </DataSource>
    </Action> -->


  </GlobalActions>

  <Steps>
    <Step State="1">
      <Groups>
        <Group>
          <Permissions>
            <string>ITSMProblem</string>
          </Permissions>
          <Buttons>
            <Button xsi:type="ShareCodeButton" Ident="SubmitButtonShare" />
          </Buttons>
          <Sections>
            <Section Ident="HeaderSection" IsVisible="true" />
            <Section Ident="TimeLineSection" IsVisible="false" />
          </Sections>
          <Controls>
            <FormControl xsi:type="ShareCodeControl" Ident="EnableCategoryControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableContactInformationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableBasicControlShare" />
          </Controls>
        </Group>
      </Groups>
    </Step> <!--New-->
    <Step State="2">
      <Groups>
        <Group>
          <Permissions>
            <string>ITSMProblem</string>
          </Permissions>
          <Buttons>
            <Button xsi:type="ShareCodeButton" Ident="SaveAndExitButtonShare" />
          </Buttons>
          <Controls>
            <FormControl xsi:type="ShareCodeControl" Ident="EnableCategoryControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableContactInformationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableBasicControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableAssigneeControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableCommunicationControlShare" />
          </Controls>
        </Group>
        <Group>
          <Permissions>
            <string>ITSMOperator</string>
          </Permissions>
          <Buttons>
            <Button xsi:type="ShareCodeButton" Ident="SaveAndExitButtonShare" />
            <Button xsi:type="ShareCodeButton" Ident="CloseButtonShare" />
            <Button xsi:type="ShareCodeButton" Ident="ToProcessButtonShare" />
          </Buttons>
          <Controls>
            <FormControl xsi:type="ShareCodeControl" Ident="EnableCategoryControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableContactInformationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableBasicControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableAssigneeControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableCommunicationControlShare" />
          </Controls>
        </Group>
      </Groups>
    </Step> <!--Registration-->
    <Step State="3">
      <Groups>
        <Group>
          <Permissions>
            <string>ITSMProblem</string>
          </Permissions>
          <Buttons>
            <Button xsi:type="ShareCodeButton" Ident="SaveAndExitButtonShare" />
          </Buttons>
          <Controls>
            <FormControl xsi:type="ShareCodeControl" Ident="ShowContactInformationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableAssigneeControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableCommunicationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableLinkControlShare" /> 
            <FormControl xsi:type="ShareCodeControl" Ident="EnableDocumentationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableWrittenEvaluationControlShare" />
          </Controls>
        </Group>
        <Group>
          <Permissions>
            <string>ITSMOperator</string>
          </Permissions>
          <Buttons>
            <Button xsi:type="ShareCodeButton" Ident="SaveAndExitButtonShare" />
            <Button xsi:type="ShareCodeButton" Ident="DeleteButtonShare" />
            <Button xsi:type="ShareCodeButton" Ident="TakeoutForSolveButtonShare" />
            <Button xsi:type="ShareCodeButton" Ident="SolveButtonShare" />
            <Button xsi:type="ShareCodeButton" Ident="TempAssignButtonShare" />
          </Buttons>
          <Controls>
            <FormControl xsi:type="ShareCodeControl" Ident="ShowContactInformationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableAssigneeControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableCommunicationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableLinkControlShare" /> 
            <FormControl xsi:type="ShareCodeControl" Ident="EnableDocumentationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableWrittenEvaluationControlShare" />
          </Controls>
        </Group>
      </Groups>
    </Step> <!--Přiděleno týmu-->
    <Step State="4">
      <Groups>
        <Group>
          <Permissions>
            <string>ITSMProblem</string>
          </Permissions>
          <Buttons>
            <Button xsi:type="ShareCodeButton" Ident="SaveAndExitButtonShare" />
          </Buttons>
          <Controls>
            <FormControl xsi:type="ShareCodeControl" Ident="ShowContactInformationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableAssigneeControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableCommunicationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableLinkControlShare" /> 
            <FormControl xsi:type="ShareCodeControl" Ident="EnableDocumentationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableWrittenEvaluationControlShare" />
          </Controls>
        </Group>
        <Group>
          <Permissions>
            <string>ITSMOperator</string>
          </Permissions>
          <Buttons>
            <Button xsi:type="ShareCodeButton" Ident="SaveAndExitButtonShare" />
            <Button xsi:type="ShareCodeButton" Ident="SolveButtonShare" />
            <Button xsi:type="ShareCodeButton" Ident="ToProcessButtonShare" />
          </Buttons>
          <Controls>
            <FormControl xsi:type="ShareCodeControl" Ident="ShowContactInformationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableAssigneeControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableCommunicationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableLinkControlShare" /> 
            <FormControl xsi:type="ShareCodeControl" Ident="EnableDocumentationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableWrittenEvaluationControlShare" />
          </Controls>
        </Group>
      </Groups>
    </Step> <!--Řešeno-->
    <Step State="5">
      <Groups>
        <Group>
          <Permissions>
            <string>ITSMProblem</string>
          </Permissions>
          <Buttons>
            <Button xsi:type="ShareCodeButton" Ident="SaveAndExitButtonShare" />
          </Buttons>
          <Controls>
            <FormControl xsi:type="ShareCodeControl" Ident="ShowContactInformationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableAssigneeControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableCommunicationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableLinkControlShare" /> 
            <FormControl xsi:type="ShareCodeControl" Ident="ShowDocumentationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="ShowWrittenEvaluationControlShare" />
          </Controls>
        </Group>
        <Group>
          <Permissions>
            <string>ITSMOperator</string>
          </Permissions>
          <Buttons>
            <Button xsi:type="ShareCodeButton" Ident="SaveAndExitButtonShare" />
            <Button xsi:type="ShareCodeButton" Ident="CloseButtonShare" />
            <Button xsi:type="ShareCodeButton" Ident="ToProcessButtonShare" />
          </Buttons>
          <Controls>
            <FormControl xsi:type="ShareCodeControl" Ident="ShowContactInformationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableAssigneeControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableCommunicationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="EnableLinkControlShare" /> 
            <FormControl xsi:type="ShareCodeControl" Ident="ShowDocumentationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="ShowWrittenEvaluationControlShare" />
          </Controls>
        </Group>
      </Groups>
    </Step> <!--Vyřešeno-->
    <Step State="6">
      <Groups>
        <Group>
          <Permissions>
            <string>ITSMProblem</string>
          </Permissions>
          <Buttons>
          </Buttons>
          <Controls>
            <FormControl xsi:type="ShareCodeControl" Ident="ShowContactInformationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="ShowAssigneeControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="ShowCommunicationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="ShowLinkControlShare" /> 
            <FormControl xsi:type="ShareCodeControl" Ident="ShowDocumentationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="ShowWrittenEvaluationControlShare" />
          </Controls>
        </Group>
        <Group>
          <Permissions>
            <string>ITSMOperator</string>
          </Permissions>
          <Buttons>
          </Buttons>
          <Controls>
            <FormControl xsi:type="ShareCodeControl" Ident="ShowContactInformationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="ShowAssigneeControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="ShowCommunicationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="ShowLinkControlShare" /> 
            <FormControl xsi:type="ShareCodeControl" Ident="ShowDocumentationControlShare" />
            <FormControl xsi:type="ShareCodeControl" Ident="ShowWrittenEvaluationControlShare" />
          </Controls>
        </Group>
      </Groups>
    </Step> <!--Closed-->
    
  </Steps>
</WorkFlow>